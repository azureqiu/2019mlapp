{"ast":null,"code":"import _defineProperty from\"/Users/qiujizhao/Desktop/Fall 2019/ML/React/my-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Users/qiujizhao/Desktop/Fall 2019/ML/React/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{useState,useEffect,useRef}from'react';import{Viewport}from'pixi-viewport';import*as PIXI from'pixi.js';import Overlay from'./Overlay';import positions from'./test';import'./App.css';import ToolTip from'./ToolTip';function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),overlay=_useState2[0],setOverlay=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),toolTip=_useState4[0],setToolTip=_useState4[1];var canvas=useRef(null);useEffect(function(){var app=new PIXI.Application({width:window.innerWidth,height:window.innerHeight,view:canvas.current});var positionDict={};for(var i=0;i<positions.length;i++){// const filename = positions[i].filename.replace(/\\//g, '_');\nvar filename=positions[i].filename;var name=filename.replace('.jpg','');console.log(filename+name);app.loader.add(name,\"./resized/resized_\"+filename);positionDict[name]=positions[i];}var viewport=new Viewport({screenWidth:window.innerWidth,screenHeight:window.innerHeight,worldWidth:1000,worldHeight:1000,interaction:app.renderer.plugins.interaction// the interaction module is important for wheel to work properly when renderer.view is placed or scaled\n});// add the viewport to the stage\napp.stage.addChild(viewport);// activate plugins\nviewport.drag().pinch().wheel().decelerate();app.loader.load(function(loader,resources){var _loop=function _loop(key){var imageSprite=new PIXI.Sprite(resources[key].texture);var clusterPos=positionDict[key].cluster_pos;imageSprite.x=5*app.renderer.width*(clusterPos[0]*2-1);imageSprite.y=5*app.renderer.width*(clusterPos[1]*2-1);imageSprite.anchor.x=0.5;imageSprite.anchor.y=0.5;imageSprite.interactive=true;var name=key;imageSprite.on('click',function(){setOverlay(positionDict[name]);});imageSprite.on('mouseover',function(e){console.log(positionDict[name]);// console.log(positionDict[key].gif)\nsetToolTip(_objectSpread({},positionDict[name],{xpos:e.data.global.x,ypos:e.data.global.y}));// imageSprite.height = imageSprite.height * 2;\n// imageSprite.width = imageSprite.width * 2;\n});imageSprite.on('mouseout',function(){setToolTip(null);// imageSprite.height = imageSprite.height * .5;\n// imageSprite.width = imageSprite.width * .5;\n});viewport.addChild(imageSprite);};for(var key in resources){_loop(key);}});},[]);return React.createElement(\"div\",{className:\"App\"},React.createElement(\"canvas\",{ref:canvas}),overlay&&React.createElement(Overlay,{details:overlay,setOverlay:setOverlay}),toolTip&&React.createElement(ToolTip,{details:toolTip}));}export default App;","map":{"version":3,"sources":["/Users/qiujizhao/Desktop/Fall 2019/ML/React/my-app/src/App.js"],"names":["React","useState","useEffect","useRef","Viewport","PIXI","Overlay","positions","ToolTip","App","overlay","setOverlay","toolTip","setToolTip","canvas","app","Application","width","window","innerWidth","height","innerHeight","view","current","positionDict","i","length","filename","name","replace","console","log","loader","add","viewport","screenWidth","screenHeight","worldWidth","worldHeight","interaction","renderer","plugins","stage","addChild","drag","pinch","wheel","decelerate","load","resources","key","imageSprite","Sprite","texture","clusterPos","cluster_pos","x","y","anchor","interactive","on","e","xpos","data","global","ypos"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Viewport } from 'pixi-viewport';\nimport * as PIXI from 'pixi.js';\n\nimport Overlay from './Overlay';\nimport positions from './test';\nimport './App.css';\nimport ToolTip from './ToolTip';\n\nfunction App() {\n  const [overlay, setOverlay] = useState(null);\n  const [toolTip, setToolTip] = useState(null);\n  const canvas = useRef(null);\n\n  useEffect(() => {\n    const app = new PIXI.Application({\n      width: window.innerWidth,\n      height: window.innerHeight,\n      view: canvas.current,\n    });\n\n    let positionDict = {}\n\n    for(let i = 0; i < positions.length; i ++) {\n      // const filename = positions[i].filename.replace(/\\//g, '_');\n      const filename = positions[i].filename;\n      const name = filename.replace('.jpg', '');\n    console.log(filename + name);\n      app.loader.add(name, \"./resized/resized_\" + filename)\n\n      positionDict[name] = positions[i]\n    }\n\n    const viewport = new Viewport({\n        screenWidth: window.innerWidth,\n        screenHeight: window.innerHeight,\n        worldWidth: 1000,\n        worldHeight: 1000,\n        interaction: app.renderer.plugins.interaction // the interaction module is important for wheel to work properly when renderer.view is placed or scaled\n    })\n\n    // add the viewport to the stage\n    app.stage.addChild(viewport)\n\n    // activate plugins\n    viewport\n        .drag()\n        .pinch()\n        .wheel()\n        .decelerate()\n\n\n    app.loader.load((loader, resources) => {\n      for(let key in resources) {\n        const imageSprite = new PIXI.Sprite(resources[key].texture)\n\n        const clusterPos = positionDict[key].cluster_pos;\n\n        imageSprite.x = 5 * app.renderer.width * (clusterPos[0] * 2 - 1);\n        imageSprite.y = 5 * app.renderer.width * (clusterPos[1] * 2 - 1);\n\n        imageSprite.anchor.x = 0.5;\n        imageSprite.anchor.y = 0.5;\n\n        imageSprite.interactive = true;\n\n        const name = key;\n        imageSprite.on('click', () => {\n          setOverlay(positionDict[name]);\n        });\n\n        imageSprite.on('mouseover', (e) => {\n          console.log(positionDict[name])\n          // console.log(positionDict[key].gif)\n          setToolTip({...positionDict[name], xpos: e.data.global.x, ypos: e.data.global.y});\n          // imageSprite.height = imageSprite.height * 2;\n          // imageSprite.width = imageSprite.width * 2;\n        });\n\n        imageSprite.on('mouseout', () => {\n          setToolTip(null);\n          // imageSprite.height = imageSprite.height * .5;\n          // imageSprite.width = imageSprite.width * .5;\n        });\n\n\n        viewport.addChild(imageSprite);\n      }\n    });\n  }, [])\n\n  return (\n    <div className=\"App\">\n      <canvas\n        ref={canvas}\n      />\n      {overlay &&\n        <Overlay\n          details={overlay}\n          setOverlay={setOverlay}\n        />\n      }\n      {toolTip && \n        <ToolTip details={toolTip} />\n      }\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}