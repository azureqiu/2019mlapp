{"ast":null,"code":"import _slicedToArray from\"/Users/qiujizhao/Desktop/Fall 2019/ML/React/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from'react';import{Viewport}from'pixi-viewport';import*as PIXI from'pixi.js';import Overlay from'./Overlay';import positions from'./image_umap_position';import'./App.css';function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),overlay=_useState2[0],setOverlay=_useState2[1];var canvas=useRef(null);useEffect(function(){var app=new PIXI.Application({width:window.innerWidth,height:window.innerHeight,view:canvas.current});var positionDict={};for(var i=0;i<positions.length;i++){var filename=positions[i].filename.replace(/\\//g,'_');var name=filename.replace('.jpg','');app.loader.add(name,\"./resized/\"+filename);positionDict[name]=positions[i];}var viewport=new Viewport({screenWidth:window.innerWidth,screenHeight:window.innerHeight,worldWidth:1000,worldHeight:1000,interaction:app.renderer.plugins.interaction// the interaction module is important for wheel to work properly when renderer.view is placed or scaled\n});// add the viewport to the stage\napp.stage.addChild(viewport);// activate plugins\nviewport.drag().pinch().wheel().decelerate();app.loader.load(function(loader,resources){var _loop=function _loop(key){var imageSprite=new PIXI.Sprite(resources[key].texture);var clusterPos=positionDict[key].cluster_pos;imageSprite.x=5*app.renderer.width*(clusterPos[0]*2-1);imageSprite.y=5*app.renderer.width*(clusterPos[1]*2-1);imageSprite.anchor.x=0.5;imageSprite.anchor.y=0.5;imageSprite.interactive=true;var name=key;imageSprite.on('click',function(){setOverlay(positionDict[name]);});imageSprite.on('mouseover',function(){imageSprite.height=imageSprite.height*2;imageSprite.width=imageSprite.width*2;});imageSprite.on('mouseout',function(){imageSprite.height=imageSprite.height*.5;imageSprite.width=imageSprite.width*.5;});viewport.addChild(imageSprite);};for(var key in resources){_loop(key);}});},[]);return React.createElement(\"div\",{className:\"App\"},React.createElement(\"canvas\",{ref:canvas}),overlay&&React.createElement(Overlay,{details:overlay,setOverlay:setOverlay}));}export default App;","map":{"version":3,"sources":["/Users/qiujizhao/Desktop/Fall 2019/ML/React/my-app/src/App.js"],"names":["React","useState","useEffect","useRef","Viewport","PIXI","Overlay","positions","App","overlay","setOverlay","canvas","app","Application","width","window","innerWidth","height","innerHeight","view","current","positionDict","i","length","filename","replace","name","loader","add","viewport","screenWidth","screenHeight","worldWidth","worldHeight","interaction","renderer","plugins","stage","addChild","drag","pinch","wheel","decelerate","load","resources","key","imageSprite","Sprite","texture","clusterPos","cluster_pos","x","y","anchor","interactive","on"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Viewport } from 'pixi-viewport';\nimport * as PIXI from 'pixi.js';\n\nimport Overlay from './Overlay';\nimport positions from './image_umap_position';\nimport './App.css';\n\nfunction App() {\n  const [overlay, setOverlay] = useState(null);\n  const canvas = useRef(null);\n\n  useEffect(() => {\n    const app = new PIXI.Application({\n      width: window.innerWidth,\n      height: window.innerHeight,\n      view: canvas.current,\n    });\n\n    let positionDict = {}\n\n    for(let i = 0; i < positions.length; i ++) {\n      const filename = positions[i].filename.replace(/\\//g, '_');\n      const name = filename.replace('.jpg', '');\n\n      app.loader.add(name, \"./resized/\" + filename)\n\n      positionDict[name] = positions[i]\n    }\n\n    const viewport = new Viewport({\n        screenWidth: window.innerWidth,\n        screenHeight: window.innerHeight,\n        worldWidth: 1000,\n        worldHeight: 1000,\n        interaction: app.renderer.plugins.interaction // the interaction module is important for wheel to work properly when renderer.view is placed or scaled\n    })\n\n    // add the viewport to the stage\n    app.stage.addChild(viewport)\n\n    // activate plugins\n    viewport\n        .drag()\n        .pinch()\n        .wheel()\n        .decelerate()\n\n\n    app.loader.load((loader, resources) => {\n      for(let key in resources) {\n        const imageSprite = new PIXI.Sprite(resources[key].texture)\n\n        const clusterPos = positionDict[key].cluster_pos;\n\n        imageSprite.x = 5 * app.renderer.width * (clusterPos[0] * 2 - 1);\n        imageSprite.y = 5 * app.renderer.width * (clusterPos[1] * 2 - 1);\n\n        imageSprite.anchor.x = 0.5;\n        imageSprite.anchor.y = 0.5;\n\n        imageSprite.interactive = true;\n\n        const name = key;\n        imageSprite.on('click', () => {\n          setOverlay(positionDict[name]);\n        });\n\n        imageSprite.on('mouseover', () => {\n          imageSprite.height = imageSprite.height * 2;\n          imageSprite.width = imageSprite.width * 2;\n        });\n\n        imageSprite.on('mouseout', () => {\n          imageSprite.height = imageSprite.height * .5;\n          imageSprite.width = imageSprite.width * .5;\n        });\n\n\n        viewport.addChild(imageSprite);\n      }\n    });\n  }, [])\n\n  return (\n    <div className=\"App\">\n      <canvas\n        ref={canvas}\n      />\n      {overlay &&\n        <Overlay\n          details={overlay}\n          setOverlay={setOverlay}\n        />\n      }\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}